# Laravel Development Partnership with Claude

You're working with a Laravel developer who values exceptional code quality, maintainability, and modern development practices. This document establishes our working relationship and non-negotiable standards.

## Partnership Approach

We're partners in building production-quality Laravel applications. You provide expertise and implementation while I provide requirements and direction. When you see better approaches, suggest them. When you see potential issues, flag them. When something seems unclear, ask for clarification.

## ğŸš¨ NON-NEGOTIABLE: Automated Quality Checks

**ZERO TOLERANCE POLICY**: All automated checks must pass. No exceptions.

- **Linting**: All style issues must be fixed (Pint/PHPStan)
- **Testing**: All tests must pass, no skipped tests
- **Type Safety**: Full type hints on all methods and properties
- **Security**: No vulnerabilities, no exposed secrets
- **Performance**: No N+1 queries, no unnecessary queries

**EVERYTHING MUST BE GREEN** - If a hook fails, you must fix it immediately.

## Workflow: Research â†’ Plan â†’ Implement

### ğŸš¨ NEVER JUMP STRAIGHT TO CODING

1. **Research First**
   - Understand existing code patterns
   - Check for similar implementations
   - Review relevant documentation
   - Use MCP servers (filesystem, database, Context7)

2. **Present a Plan**
   - Outline the approach
   - Identify affected files
   - Note potential challenges
   - Get approval before proceeding

3. **Implement with Checkpoints**
   - Run linters after every 3 file edits
   - Test each component as you build
   - Verify hooks pass before moving on

## When to Use "ultrathink"

For complex architectural decisions or tricky bugs, use extended thinking:
- Database schema design
- Complex Livewire component interactions
- Performance optimization strategies
- Security implementation details

## Reality Checkpoints

**After completing any feature:**
```bash
./vendor/bin/pint          # Laravel code style
./vendor/bin/phpstan       # Static analysis
php artisan test          # Run tests
```

**Hook Failure Recovery Protocol:**
1. Read the exact error message
2. Fix the specific issue (don't disable the check)
3. Re-run the check to verify
4. Only proceed when everything passes

## Working Memory Management

When conversations get long:
1. Re-read this CLAUDE.md file
2. Check PROGRESS.md for completed work
3. Review TODO.md for pending tasks
4. Use MCP memory server for important decisions

## ğŸš¨ FORBIDDEN: Never Do These

### Laravel Anti-Patterns
- âŒ Raw SQL queries (use Eloquent/Query Builder)
- âŒ Direct $_GET/$_POST access (use Request)
- âŒ Database queries in Blade views
- âŒ Logic in routes files
- âŒ Hardcoded configuration values
- âŒ Missing database indexes on foreign keys
- âŒ N+1 query problems
- âŒ enum columns in database, use Enum classes instead

### Livewire Violations
- âŒ Database queries in render() method
- âŒ Polling for real-time updates (use Reverb + Echo)
- âŒ Computed properties that hit database
- âŒ Public properties with sensitive data

### Code Quality Sins
- âŒ Commented-out code
- âŒ TODO comments (use TODO.md instead)
- âŒ Var_dump/dd() in committed code
- âŒ Empty catch blocks
- âŒ Disabled linter rules
- âŒ "Fix later" implementations

### Security Disasters
- âŒ SQL injection vulnerabilities
- âŒ XSS vulnerabilities
- âŒ Mass assignment vulnerabilities
- âŒ Exposed API keys or secrets
- âŒ Unvalidated user input
- âŒ Direct file system access from user input

## âœ… REQUIRED: Always Do These

### Laravel Excellence
- âœ… Use Livewire and Filament validation
- âœ… Use Policies for authorization
- âœ… Use Jobs for heavy processing
- âœ… Use Events/Listeners for decoupling
- âœ… Use Eloquent relationships properly
- âœ… Add database indexes for foreign keys and frequent queries, use Enum classes, never create enum columns in the database

### Livewire Best Practices
- âœ… Keep components focused (single responsibility)
- âœ… Use wire:model for form binding
- âœ… Emit events for parent-child communication
- âœ… Use validation rules in components
- âœ… Implement real-time with Reverb + Echo, No polling
- âœ… Use defer for non-critical updates

### Filament Standards
- âœ… Use Filament Resources for CRUD
- âœ… Implement proper authorization
- âœ… Use Form/Table builders
- âœ… Create custom fields when needed
- âœ… Use notifications for user feedback
- âœ… Don't use polling or JS window.reload() always use Echo and Broadcasting

### Code Structure
- âœ… Single Responsibility Principle
- âœ… Dependency Injection
- âœ… Service classes for business logic
- âœ… Clear, self-documenting variable names
- âœ… Type hints on all methods

## Implementation Standards

A feature is only complete when:
- âœ… All code is written and working
- âœ… All automated checks pass (green)
- âœ… Feature works end-to-end
- âœ… Tests are written and passing
- âœ… No performance issues
- âœ… No security vulnerabilities
- âœ… Code follows Laravel conventions

## Testing Strategy

### Always Test
- Livewire components
- Critical business logic
- Authorization policies

### Test Types
- Feature tests for user flows
- Unit tests for services/actions
- Browser tests for complex UI (Dusk)
- All Tests are PEST Tests, no other Test style allowed

## Project Structure

```
app/
â”œâ”€â”€ Actions/          # Single-purpose action classes
â”œâ”€â”€ Console/          # Artisan commands
â”œâ”€â”€ Events/           # Event classes
â”œâ”€â”€ Exceptions/       # Custom exceptions
â”œâ”€â”€ Filament/         # Filament resources and pages
â”œâ”€â”€ Http/
â”‚   â”œâ”€â”€ Controllers/  # Keep thin, delegate to services
â”‚   â”œâ”€â”€ Livewire/    # Livewire components
â”‚   â”œâ”€â”€ Middleware/  # Custom middleware
â”‚   â””â”€â”€ Requests/    # Form requests
â”œâ”€â”€ Jobs/            # Queued jobs
â”œâ”€â”€ Listeners/       # Event listeners
â”œâ”€â”€ Models/          # Eloquent models
â”œâ”€â”€ Policies/        # Authorization policies
â”œâ”€â”€ Providers/       # Service providers
â””â”€â”€ Services/        # Business logic
```

## Problem-Solving Protocol

When you're stuck or confused:
1. **Stop** - Don't spiral into complex solutions
2. **Delegate** - Consider spawning agents for parallel investigation
3. **Ultrathink** - For complex problems, say "I need to ultrathink through this challenge" to engage deeper reasoning
4. **Step back** - Re-read the requirements
5. **Simplify** - The simple solution is usually correct
6. **Ask** - "I see two approaches: [A] vs [B]. Which do you prefer?"

My insights on better approaches are valued - please ask for them!

## Performance Guidelines

- Measure before optimizing
- Use database indexes effectively
- Implement caching strategically
- Use queues for heavy operations
- Optimize queries with eager loading
- Monitor with Laravel Debugbar

## Security Requirements

- Validate all input
- Sanitize all output
- Use Laravel's built-in security features
- Never trust user input
- Always use parameterized queries
- Implement proper CORS policies
- Use HTTPS in production

## Communication

### Progress Updates
```
âœ… Completed: [what was done]
ğŸ”„ In Progress: [what you're working on]
âŒ Blocked: [what's blocking you]
```

### Suggesting Improvements
"I notice [observation]. Would you like me to [suggestion]?"

### Asking for Clarification
"To ensure I implement this correctly, could you clarify [specific question]?"

## Remember

1. **Quality over speed** - Do it right the first time
2. **Hooks are helpers** - They catch mistakes early
3. **You're building production code** - No shortcuts
4. **Communication is key** - Unclear? Ask!
5. **Learn from patterns** - Follow existing code style

## MCP Server Usage

You have access to:
- **Filesystem**: Read/write project files
- **Database**: Query and inspect data
- **Context7**: Access latest Laravel docs
- **Memory**: Store important decisions
- **GitHub**: Repository operations
- **Web Fetch**: External resources

Use these actively to maintain context and ensure quality.

## Custom Commands

Use these slash commands for structured workflows:
- `/check` - Run comprehensive quality checks
- `/next` - Implement features with production quality
- `/prompt` - Generate complete implementation prompts

## Personal Preferences

Import your personal Laravel development preferences:
- @.claude/personal-laravel-preferences.md

---

*This is CLAUDE.md - your project's development standards and workflow guide.*